income of $40,000 while the median income of neighborhoods with low public
transportation use is about $110,000.",
x = "Median income",
y = "Percent who use public transportation to get to work",
caption = "Source: BNIA  By: Victoria Stavish")
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
mutate(median_income = as.numeric(median_income)) %>%
arrange(desc(public_transport))
View(transportation_income_join)
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
mutate(x2020_data.y = as.numeric(x2020_data.y)) %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
View(median_income)
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community")
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join$median_income <- mutate(median_income = as.numeric(median_income))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join$median_income <-  as.numeric(tranportation_income_join$median_income))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join$median_income <-  as.numeric(tranportation_income_join$median_income)
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join <-  as.numeric(tranportation_income_join$median_income)
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join <-  as.numeric(transportation_income_join$median_income)
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join$median_income <-  as.numeric(transportation_income_join$median_income)
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
as.numeric(transportation_income_join$median_income) %>%
arrange(desc(public_transport))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
as.numeric(transportation_income_join$median_income)
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
as.numeric(unlist(transportation_income_join$median_income)) %>%
arrange(desc(public_transport))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
unlist(median_income)
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x)
View(median_income)
glimpse(median_income)
median_income <- median_income %>%
clean_names() %>%
as.numeric(unlist(median_income$median_income))
median_income <- median_income %>%
clean_names() %>%
unlist()
median_income <- median_income %>%
clean_names() %>%
as.numeric(median_income$median_income)
median_income <- median_income %>%
as.numeric(median_income$median_income)
median_income <- median_income
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
library(tidyverse)
library(dplyr)
library(janitor)
library(lubridate)
library(readxl)
library(ggthemes)
library(sf)
library(leaflet)
# 5 Baltimore neighborhoods that use public transportation the most to get to work
max_public_transportation <- public_transportation %>%
as.data.frame() %>%
clean_names() %>%
rename(public_use = x2020_data) %>%
slice_max(public_use, n=5)
# 5 Baltimore neighborhoods that use public transportation the least to get to work
min_public_transportation <- public_transportation %>%
clean_names() %>%
rename(public_transport = x2020_data) %>%
slice_min(public_transport, n=5)
# Output dataframes
max_public_transportation
min_public_transportation
# inner join neighborhoods that use public transportation the most with income data
median_income <- median_income %>%
clean_names()
max_transit_income <- max_public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data)
# inner join neighborhoods that use public transportation the least with income data
min_transit_income <- min_public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data)
# output dataframes
max_transit_income
min_transit_income
median_income <- median_income %>%
as.numeric(median_income$median_income)
median_income <- median_income %>%
as.numeric(unlist(median_income$median_income))
median_income <- median_income %>%
as.data.frame() %>%
as.numeric(unlist(median_income$median_income))
median_income <- median_income %>%
as.data.frame()
median_income <- median_income %>%
as.data.frame() %>%
as.numeric(median_income$median_income)
median_income <- median_income %>%
as.data.frame()
glimpse(median_income)
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income$median_income = as.numeric(median_income$median_income))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(median_income$median_income))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income$median_income = as.numeric(median_income$median_income))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income$median_income == as.numeric(median_income$median_income))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income$x2020_data == as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(median_income$x2020_data))
glimpse(median_income)
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(ulist(median_income$x2020_data)))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(unlist(median_income$x2020_data)))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(unlist(median_income[['x2020_data']])))
# inner join neighborhoods that use public transportation the most with income data
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(unlist(median_income$'x2020_data')))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(unlist(median_income$x2020_data)))
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(median_income$x2020_data))
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
# inner join neighborhoods that use public transportation the most with income data
median_income <- median_income %>%
as.data.frame() %>%
mutate(median_income = as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income = as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income$x2020_data = as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income$x2020_data == as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income$x2020_data == as.numeric(median_income$x2020_data))
median_income <- gsub(",", "", x2020_data)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- gsub(",", "", x2020_data) %>%
mutate(median_income$x2020_data == as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
gsub(",", "", x2020_data)
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
library(tidyverse)
library(dplyr)
library(janitor)
library(lubridate)
library(readxl)
library(ggthemes)
library(sf)
library(leaflet)
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
gsub(",", "", x2020_data)
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
gsub(",", "", median_income$x2020_data)
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
gsub(",", "", median_income1$x2020_data)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
View(median_income1)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
gsub(",", "", median_income1$x2020_data)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
glimpse(median_income1)
# inner join neighborhoods that use public transportation the most with income data
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
unlist(median_income) %>%
as.numeric(unlist(transportation_income_join$median_income)) %>%
arrange(desc(public_transport))
# inner join neighborhoods that use public transportation the most with income data
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income1, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
unlist(median_income) %>%
as.numeric(unlist(transportation_income_join$median_income)) %>%
arrange(desc(public_transport))
# inner join neighborhoods that use public transportation the most with income data
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income1, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join$median_income <-  as.numeric(transportation_income_join$median_income)
# scatterplots for the two graphs
ggplot(transportation_income_join, aes(y=public_transport, x=median_income)) +
geom_point() +
theme(axis.text.x = element_text(angle = 90)) +
labs(
title="As public transportation use declines, salaries increase",
subtitle = "In Baltimore City neighborhoods, neighborhoods with high public transportation use make an median
income of $40,000 while the median income of neighborhoods with low public
transportation use is about $110,000.",
x = "Median income",
y = "Percent who use public transportation to get to work",
caption = "Source: BNIA  By: Victoria Stavish")
scipen(options=999)
options(scipen=999)
# inner join neighborhoods that use public transportation the most with income data
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income1, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
transportation_income_join$median_income <-  as.numeric(transportation_income_join$median_income)
# scatterplots for the two graphs
ggplot(transportation_income_join, aes(y=public_transport, x=median_income)) +
geom_point() +
theme(axis.text.x = element_text(angle = 90)) +
labs(
title="As public transportation use declines, salaries increase",
subtitle = "In Baltimore City neighborhoods, neighborhoods with high public transportation use make an median
income of $40,000 while the median income of neighborhoods with low public
transportation use is about $110,000.",
x = "Median income",
y = "Percent who use public transportation to get to work",
caption = "Source: BNIA  By: Victoria Stavish")
setwd("~/GitHub")
setwd("~/GitHub")
#| label: load_libraries_settings
#| include: false
library(tidyverse)
library(dplyr)
library(writexl)
library(janitor)
library(readxl)
library(openxlsx)
pacman::p_load(tidyverse, crosstalk, DT, lubridate, plotly, reactable, gt, summarywidget, here, glue, janitor, googlesheets4, googledrive, ggthemes, devtools, knitr, kableExtra,tidytext,textstem)
# for Windows users, explicitly loading splitstackshape library
library(splitstackshape)
#| label: load_data
#| include: false
data <- read_excel("salary_2022.xlsx")
#| label: analysis
#| include: false
all_positions <- data %>%
clean_names() %>%
select(division, category_status, category_status_cd, appt_base_annual_salary, primary_name) %>%
filter(grepl("Tenured Faculty|Tenure Track Faculty|Non-Tenured,Cont. Contr. Faculty|Non-Tenured, Term. Contr. Faculty|Non-Tenured, Non-Regular Faculty", category_status)) %>%
filter(!str_detect("VP Research|Graduate School|Undergraduate Studies| Office of the President|Sr VP Academic Affairs & Provost|VP Student Affairs|Universities at Shady Grove|Office of Extended Studies|Libraries", division))
# Create a list of columns you want to hide on load
hidden_columns <- as.numeric(c(12:(ncol(all_positions)-1)))
# Remove columnDefs if you don't want to hide any columns
all_positions <- all_positions |>
datatable(
filter = "top",
extensions = c(
"Buttons"
),
rownames=FALSE,
escape=FALSE,
#    style="bootstrap",
class="compact cell-border stripe",
width="100%",
options = list (
columnDefs = list(list(visible=FALSE, targets=hidden_columns)
),
dom = "Blftipr",
deferRender=TRUE,
autoWidth=TRUE,
pageLength = 10,
buttons = list(
"colvis",
"csv",
list(extend = 'excel', title = NULL)
)
)
)
all_positions
#| label: analysis
#| include: false
all_positions <- data %>%
clean_names() %>%
select(division, category_status, category_status_cd, appt_base_annual_salary, primary_name) %>%
filter(grepl("Tenured Faculty|Tenure Track Faculty|Non-Tenured,Cont. Contr. Faculty|Non-Tenured, Term. Contr. Faculty|Non-Tenured, Non-Regular Faculty", category_status)) %>%
filter(!str_detect("VP Research|Graduate School|Undergraduate Studies| Office of the President|Sr VP Academic Affairs & Provost|VP Student Affairs|Universities at Shady Grove|Office of Extended Studies|Libraries", division))
# Create a list of columns you want to hide on load
hidden_columns <- as.numeric(c(12:(ncol(all_positions)-1)))
# Remove columnDefs if you don't want to hide any columns
all_positions <- all_positions |>
datatable(
filter = "top",
extensions = c(
"Buttons"
),
rownames=FALSE,
escape=FALSE,
#    style="bootstrap",
class="compact cell-border stripe",
width="100%",
options = list (
columnDefs = list(list(visible=FALSE, targets=hidden_columns)
),
dom = "Blftipr",
deferRender=TRUE,
autoWidth=TRUE,
pageLength = 10,
buttons = list(
"colvis",
"csv",
list(extend = 'excel', title = NULL)
)
)
)
View(all_positions)
